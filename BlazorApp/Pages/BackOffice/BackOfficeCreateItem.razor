@page "/BackOfficeCreateItem"
@using HttpClients.Implementations
@using Domain.DTOs.Item
@inject NavigationManager NavigationManager
@inject IItemService ItemService
<h3>Create new item</h3>
<span>
    <input type="text" @bind="title" @bind:event="oninput" placeholder="Enter title..."/>
    <input type="text" @bind="description" @bind:event="oninput" placeholder="Enter description..."/>
    <input type="text" @bind="priceString" @bind:event="oninput" placeholder="Enter price..."/>
    <button @onclick="Create" disabled="@(string.IsNullOrEmpty(title) || string.IsNullOrEmpty(description) || string.IsNullOrEmpty(priceString))" class="acceptbtn">Create</button>
</span>
<br/>
<br/>
<label style="color: red">@msg</label>

@code {
    string title, description, priceString;
    string msg = "";

    private async Task Create()
    {
        msg = "";
        if (Double.TryParse(priceString, out var price))
        {
            var itemDto = new ItemCreationDto(title, description, price);
            var item = await ItemService.CreateAsync(itemDto);
            NavigationManager.NavigateTo("/BackOfficeItems");
        }
        else
        {
            msg = "Please insert a correct formatting for the price.";
        }
    }

}