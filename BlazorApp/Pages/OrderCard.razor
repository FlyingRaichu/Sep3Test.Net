@using HttpClients.Interfaces
@using BlazorApp.Service
@inject IItemService ItemService
@inject NavigationManager NavManager
@inject NavService NavService

<MudItem xs="12" md="6" lg="4">
    <MudCard>
        <MudCardContent>
            <MudText Typo="Typo.h5">Order Id #@Order.Id â€” @Order.Date</MudText>
            <MudText Typo="Typo.body1">Contains:</MudText>
            @foreach (var item in Order.Items)
            {
                <MudItem>
                    <MudText>"Item #"@item.ItemId </MudText>
                </MudItem>
                <MudItem>
                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@( () => ViewItem(item.ItemId))">Details</MudButton>
                </MudItem>
                <MudDivider/>
            }
        </MudCardContent>
    </MudCard>
</MudItem>

@code {
    [Parameter] 
    public Order Order { get; set; }
    
    private async void ViewItem(int item)
    {
        NavService.Selected = await ItemService.GetByIdAsync(item);
        NavService.CurrentPage = "ItemDetails";
        NavManager.NavigateTo("/ItemDetails");
    }

}